#!/bin/sh

DEST_DIR=$HOME
BACK_DIR=$DEST_DIR/.dotfiles.bak
CURR_DIR=`pwd`

installdot() {
  local install=$CURR_DIR/$1
  echo "==> install .$1"

  if [ ! -e $BACK_DIR ]; then
    echo "$BACK_DIR does not exist!"
    return
  fi

  if [ -e $BACK_DIR/$1 ]; then
    if [ ! -L $DEST_DIR/.$1 ]; then
      echo "Warning: .$1 exists in $BACK_DIR but is not a symlink in $DEST_DIR."
    fi
    return
  fi

  if [ -e $DEST_DIR/.$1 ]; then
    mv $DEST_DIR/.$1 $BACK_DIR
  fi

  ln -s $install $DEST_DIR/.$1
}

if [ ! -d $BACK_DIR ]; then
  mkdir -p $BACK_DIR
fi

cd lib
echo "==> install base16-shell"
git clone https://github.com/chriskempson/base16-shell.git base16-shell
cd ..

cd share
echo "==> install base16-gnome-terminal"
git clone https://github.com/chriskempson/base16-gnome-terminal.git
echo "==> install base16-xresources"
git clone https://github.com/chriskempson/base16-xresources.git
echo "==> install base16-textmate"
git clone https://github.com/chriskempson/base16-textmate.git
echo "==> install base16-iterm2"
git clone https://github.com/chriskempson/base16-iterm2.git
echo "==> install powerline-fonts"
git clone https://github.com/Lokaltog/powerline-fonts.git
cd ..

echo "==> install vundle"
cd vim
mkdir -p bundle && cd bundle
git clone https://github.com/gmarik/Vundle.vim
cd ..
cd ..

installdot Xresources
installdot bashrc
installdot gdbinit
installdot gitignore_global
installdot inputrc
installdot rcrc
installdot tmux.conf
installdot vim
installdot vimrc
installdot vimrc.bundles
installdot vimrc.more
installdot zshrc
installdot bin
installdot lib
installdot share
